# FIO 压测报告

**报告生成时间**: 2025-12-02 17:59:01
**结果文件**: fio-results_20251202_175123.json
**输出目录**: /home/ubuntu/intel-4610-nvme/rbd1/20251202_175123
**测试文件**: /dev/rbd1

---

## 1. 准备阶段 (PREPARE)

| 作业名 | 写入IOPS | 写入吞吐量 (MB/s) | 平均延迟 (ms) | P99 延迟 (ms) | P99.99 延迟 (ms) | 延迟标准差 (ms) |
|-------|---------|----------------|-------------|-------------|----------------|---------------|

---

## 2. 生产环境模拟 (PROD - 混合读写)

| 作业名 | 读取IOPS | 写入IOPS | 读取吞吐量 (MB/s) | 写入吞吐量 (MB/s) | 读平均延迟 (ms) | 写平均延迟 (ms) | 读P99 延迟 (ms) | 写P99 延迟 (ms) |
|-------|---------|---------|----------------|----------------|---------------|---------------|---------------|---------------|

---

## 3. 延迟测试 - 随机读 (LATENCY-RND-READ-4K)

| 作业名 | IOPS | 吞吐量 (MB/s) | 平均延迟 (ms) | P99 延迟 (ms) | P99.99 延迟 (ms) | 延迟标准差 (ms) |
|-------|------|-------------|-------------|-------------|----------------|---------------|
| LATENCY-RND-READ-4K | 2,644 | 10.33 | 0.38 | 0.00 | 0.00 | 0.11 |
| RND-READ-4K-128-128 | 77,483 | 306.89 | 209.78 | 0.00 | 0.00 | 141.33 |
| RND-READ-4K-128-64 | 90,319 | 354.91 | 91.42 | 0.00 | 0.00 | 179.85 |
| RND-READ-4K-2-256 | 121,183 | 473.50 | 4.22 | 0.00 | 0.00 | 3.27 |
| RND-READ-4K-256-64 | 55,736 | 221.94 | 291.66 | 0.00 | 0.00 | 111.98 |
| RND-READ-4K-64-64 | 92,801 | 363.55 | 44.14 | 0.00 | 0.00 | 46.36 |

---

## 4. 延迟测试 - 随机写 (LATENCY-RND-WRITE-4K)

| 作业名 | IOPS | 吞吐量 (MB/s) | 平均延迟 (ms) | P99 延迟 (ms) | P99.99 延迟 (ms) | 延迟标准差 (ms) |
|-------|------|-------------|-------------|-------------|----------------|---------------|
| LATENCY-RND-WRITE-4K | 1,129 | 4.41 | 0.88 | 0.00 | 0.00 | 0.18 |
| RND-WRITE-4K-128-128 | 46,762 | 186.89 | 347.60 | 0.00 | 0.00 | 169.45 |
| RND-WRITE-4K-128-64 | 60,569 | 238.68 | 135.18 | 0.00 | 0.00 | 224.24 |
| RND-WRITE-4K-2-256 | 73,811 | 288.46 | 6.93 | 0.00 | 0.00 | 3.41 |
| RND-WRITE-4K-256-64 | 41,030 | 164.48 | 394.67 | 0.00 | 0.00 | 182.39 |
| RND-WRITE-4K-64-64 | 57,507 | 225.68 | 71.46 | 0.00 | 0.00 | 105.65 |

---

## 5. 顺序读 (SEQ-READ-1M)

| 作业名 | 吞吐量 (MB/s) | 平均延迟 (ms) | P99 延迟 (ms) | P99.99 延迟 (ms) | 延迟标准差 (ms) |
|-------|-------------|-------------|-------------|----------------|---------------|
| SEQ-READ-1M-128-128 | 2581.86 | 6656.88 | 0.00 | 0.00 | 4983.60 |
| SEQ-READ-1M-128-64 | 3958.25 | 2144.49 | 0.00 | 0.00 | 2533.45 |
| SEQ-READ-1M-2-256 | 4251.67 | 122.17 | 0.00 | 0.00 | 272.42 |
| SEQ-READ-1M-256-64 | 2447.13 | 6920.32 | 0.00 | 0.00 | 5030.97 |
| SEQ-READ-1M-64-64 | 4150.81 | 1017.95 | 0.00 | 0.00 | 1147.57 |

---

## 6. 顺序写 (SEQ-WRITE-1M)

| 作业名 | 吞吐量 (MB/s) | 平均延迟 (ms) | P99 延迟 (ms) | P99.99 延迟 (ms) | 延迟标准差 (ms) |
|-------|-------------|-------------|-------------|----------------|---------------|
| SEQ-WRITE-1M-128-128 | 2630.40 | 6484.58 | 0.00 | 0.00 | 4173.86 |
| SEQ-WRITE-1M-128-64 | 2354.67 | 3704.67 | 0.00 | 0.00 | 5275.69 |
| SEQ-WRITE-1M-2-256 | 2584.69 | 200.71 | 0.00 | 0.00 | 217.85 |
| SEQ-WRITE-1M-256-64 | 2546.94 | 6612.34 | 0.00 | 0.00 | 4397.60 |
| SEQ-WRITE-1M-64-64 | 2595.86 | 1679.15 | 0.00 | 0.00 | 2221.10 |

---

## 配置说明

### 全局参数
- **ioengine**: libaio (Linux 异步 I/O)
- **direct**: 1 (直接 I/O，绕过缓存)
- **runtime**: 15 秒 (每个作业的运行时间)
- **ramp_time**: 3 秒 (预热时间，不计入结果)
- **size**: 1GB (每个作业的测试文件大小)

### 测试场景

#### 随机读/写 (RND-*)
- BlockSize: 4KB
- 模式: 随机读写
- 不同的并发度和 iodepth 组合

#### 顺序读/写 (SEQ-*)
- BlockSize: 1MB
- 模式: 顺序读写
- 不同的并发度和 iodepth 组合

### 指标说明

- **IOPS**: 每秒 I/O 操作数（越高越好）
- **吞吐量 (MB/s)**: 每秒传输数据量（越高越好）
- **平均延迟 (Avg Latency)**: 平均响应时间，反映整体流畅度（越低越好）
- **P99 延迟**: 99% 请求的响应时间（越低越好）
- **P99.99 延迟**: 99.99% 请求的响应时间，生产环境生死线
  - HDD 混合池建议 < 500ms
  - 全闪池建议 < 10ms
- **延迟标准差 (Latency Stdev)**: 延迟波动程度，越小越稳定
  - 如果标准差很大，可能存在坏盘或网络抖动问题

---
