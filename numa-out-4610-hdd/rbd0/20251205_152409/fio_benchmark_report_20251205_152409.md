# FIO 压测报告

**报告生成时间**: 2025-12-05 15:31:43
**结果文件**: fio-results_20251205_152409.json
**输出目录**: /home/ubuntu/numa-out-4610-hdd/rbd0/20251205_152409
**测试文件**: /dev/rbd0

---

## 1. 准备阶段 (PREPARE)

| 作业名 | 写入IOPS | 写入吞吐量 (MB/s) | 平均延迟 (ms) | P99 延迟 (ms) | P99.99 延迟 (ms) | 延迟标准差 (ms) |
|-------|---------|----------------|-------------|-------------|----------------|---------------|

---

## 2. 生产环境模拟 (PROD - 混合读写)

| 作业名 | 读取IOPS | 写入IOPS | 读取吞吐量 (MB/s) | 写入吞吐量 (MB/s) | 读平均延迟 (ms) | 写平均延迟 (ms) | 读P99 延迟 (ms) | 写P99 延迟 (ms) |
|-------|---------|---------|----------------|----------------|---------------|---------------|---------------|---------------|
| RND-RW-4K-70-30-PROD | 19,929 | 8,542 | 77.85 | 33.37 | 1.95 | 10.42 | 0.00 | 0.00 |

---

## 3. 延迟测试 - 随机读 (LATENCY-RND-READ-4K)

| 作业名 | IOPS | 吞吐量 (MB/s) | 平均延迟 (ms) | P99 延迟 (ms) | P99.99 延迟 (ms) | 延迟标准差 (ms) |
|-------|------|-------------|-------------|-------------|----------------|---------------|
| LATENCY-RND-READ-4K | 356 | 1.39 | 2.81 | 0.00 | 0.00 | 6.37 |

---

## 4. 延迟测试 - 随机写 (LATENCY-RND-WRITE-4K)

| 作业名 | IOPS | 吞吐量 (MB/s) | 平均延迟 (ms) | P99 延迟 (ms) | P99.99 延迟 (ms) | 延迟标准差 (ms) |
|-------|------|-------------|-------------|-------------|----------------|---------------|
| LATENCY-RND-WRITE-4K | 600 | 2.34 | 1.67 | 0.00 | 0.00 | 3.91 |

---

## 5. 顺序读 (SEQ-READ-1M)

| 作业名 | 吞吐量 (MB/s) | 平均延迟 (ms) | P99 延迟 (ms) | P99.99 延迟 (ms) | 延迟标准差 (ms) |
|-------|-------------|-------------|-------------|----------------|---------------|

---

## 6. 顺序写 (SEQ-WRITE-1M)

| 作业名 | 吞吐量 (MB/s) | 平均延迟 (ms) | P99 延迟 (ms) | P99.99 延迟 (ms) | 延迟标准差 (ms) |
|-------|-------------|-------------|-------------|----------------|---------------|

---

## 配置说明

### 全局参数
- **ioengine**: libaio (Linux 异步 I/O)
- **direct**: 1 (直接 I/O，绕过缓存)
- **runtime**: 15 秒 (每个作业的运行时间)
- **ramp_time**: 3 秒 (预热时间，不计入结果)
- **size**: 1GB (每个作业的测试文件大小)

### 测试场景

#### 随机读/写 (RND-*)
- BlockSize: 4KB
- 模式: 随机读写
- 不同的并发度和 iodepth 组合

#### 顺序读/写 (SEQ-*)
- BlockSize: 1MB
- 模式: 顺序读写
- 不同的并发度和 iodepth 组合

### 指标说明

- **IOPS**: 每秒 I/O 操作数（越高越好）
- **吞吐量 (MB/s)**: 每秒传输数据量（越高越好）
- **平均延迟 (Avg Latency)**: 平均响应时间，反映整体流畅度（越低越好）
- **P99 延迟**: 99% 请求的响应时间（越低越好）
- **P99.99 延迟**: 99.99% 请求的响应时间，生产环境生死线
  - HDD 混合池建议 < 500ms
  - 全闪池建议 < 10ms
- **延迟标准差 (Latency Stdev)**: 延迟波动程度，越小越稳定
  - 如果标准差很大，可能存在坏盘或网络抖动问题

---
